"0","# Plot closing prices for metal stocks"
"0","prices_df %>% "
"0","  # Convert from wide to long format for easier plotting with ggplot2"
"0","  pivot_longer(-date, names_to = ""ticker"", values_to = ""price"") %>% "
"0","  "
"0","  # Attach industry information from our original ticker list"
"0","  left_join(ticker_list %>% "
"0","              mutate(ticker = paste0(Symbol, "".NS"")) %>% "
"0","              select(ticker, industry = Industry),"
"0","            by = ""ticker"") %>% "
"0","  "
"0","  # Convert date strings to Date objects"
"0","  mutate(date = as.Date(date)) %>% "
"0","  "
"0","  # Filter to show only metal industry stocks for clarity"
"0","  filter(stringr::str_detect(tolower(industry), ""metal"")) %>% "
"0","  "
"0","  # Create the line plot"
"0","  ggplot(aes(x = date, y = price, color = ticker)) + "
"0","  geom_line(linewidth = 0.8) + "
"0","  theme_minimal() + "
"0","  scale_color_brewer(palette = ""RdBu"") +  # Use a color-blind friendly palette"
"0","  labs(title = ""Closing Prices"", "
"0","       subtitle = ""Nifty 50 metal stocks"","
"0","       x = ""Date"", "
"0","       y = ""Closing Price"") + "
"0","  theme(legend.position = ""top"", "
"0","        legend.title = element_text(colour = ""transparent""), "
"0","        axis.title.x = element_text(face = ""bold""), "
"0","        axis.title.y = element_text(face = ""bold""))"
