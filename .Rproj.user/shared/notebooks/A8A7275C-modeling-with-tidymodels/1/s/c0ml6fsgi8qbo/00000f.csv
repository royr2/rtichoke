"0","# Create a recipe"
"0","credit_recipe <- recipe(default ~ ., data = training(validation_split)) %>%"
"0","  # Remove ID column"
"0","  step_rm(customer_id) %>%"
"0","  "
"0","  # Convert categorical variables to factors"
"0","  step_string2factor(home_ownership, loan_purpose) %>%"
"0","  "
"0","  # Create additional domain-specific features"
"0","  step_mutate("
"0","    # We already have payment_to_income_ratio from data generation"
"0","    # Add more credit risk indicators"
"0","    credit_utilization = revol_util / 100,"
"0","    acc_to_age_ratio = total_acc / age,"
"0","    delinq_per_acc = ifelse(total_acc > 0, delinq_2yrs / total_acc, 0),"
"0","    inq_rate = inq_last_6mths / (open_acc + 0.1),  # Inquiry rate relative to open accounts"
"0","    term_factor = loan_term / 12,  # Term in years"
"0","    log_income = log(income),  # Log transform income"
"0","    log_loan = log(loan_amount),  # Log transform loan amount"
"0","    payment_ratio = payment_amount / (income / 12),  # Monthly payment to monthly income"
"0","    util_to_income = (revol_util / 100) * (dti_ratio / 100)  # Interaction term"
"0","  ) %>%"
"0","  "
"0","  # Handle categorical variables"
"0","  step_dummy(all_nominal_predictors()) %>%"
"0","  "
"0","  # Impute missing values (if any)"
"0","  step_impute_median(all_numeric_predictors()) %>%"
"0","  "
"0","  # Transform highly skewed variables"
"0","  step_YeoJohnson(income, loan_amount, payment_amount) %>%"
"0","  "
"0","  # Remove highly correlated predictors"
"0","  step_corr(all_numeric_predictors(), threshold = 0.85) %>%"
"0","  "
"0","  # Normalize numeric predictors"
"0","  step_normalize(all_numeric_predictors()) %>%"
"0","  "
"0","  # Remove zero-variance predictors"
"0","  step_zv(all_predictors())"
"0",""
"0","# Prep the recipe to examine the steps"
"0","prepped_recipe <- prep(credit_recipe)"
"0","prepped_recipe"
"0",""
"0","# Check the transformed data"
"0","recipe_data <- bake(prepped_recipe, new_data = NULL)"
"0","glimpse(recipe_data)"
"1","Rows: 6,000"
"1",""
"1","
"
"1","Columns: 27"
"1",""
"1","
"
"1","$ age                             [3m[38;5;246m<dbl>[39m[23m -0.58938716[38;5;246m, [39m1.60129128[38;5;246m, [39m0.05970275[38;5;246m, [39m0.14083899[38;5;246m, [39m1.76356376[38;5;246m, [39m0.46538394[38;5;246m, [39m-1.31961331[38;5;246m, [39m-0.751â€¦
$ employment_length               [3m[38;5;246m<dbl>[39m[23m 1.01545119[38;5;246m, [39m0.17764322[38;5;246m, [39m2.35594395[38;5;246m, [39m-0.15747997[38;5;246m, [39m2.35594395[38;5;246m, [39m0.68032800[38;5;246m, [39m-0.82772635[38;5;246m, [39m0.5127â€¦
$ loan_amount                     [3m[38;5;246m<dbl>[39m[23m -0.307720316[38;5;246m, [39m-1.640185587[38;5;246m, [39m0.018977853[38;5;246m, [39m-0.380674454[38;5;246m, [39m0.723210232[38;5;246m, [39m0.566183044[38;5;246m, [39m-0.24966556â€¦
$ credit_score                    [3m[38;5;246m<dbl>[39m[23m -1.66355858[38;5;246m, [39m-1.60583467[38;5;246m, [39m0.02197934[38;5;246m, [39m0.37986752[38;5;246m, [39m-0.57834923[38;5;246m, [39m-1.10940912[38;5;246m, [39m-0.52062533[38;5;246m, [39m1.1â€¦
$ dti_ratio                       [3m[38;5;246m<dbl>[39m[23m -1.10745919[38;5;246m, [39m-0.21368748[38;5;246m, [39m-1.26746777[38;5;246m, [39m0.37751116[38;5;246m, [39m1.87681825[38;5;246m, [39m-0.32499056[38;5;246m, [39m-1.11374753[38;5;246m, [39m-1.â€¦
$ delinq_2yrs                     [3m[38;5;246m<dbl>[39m[23m -0.6423758[38;5;246m, [39m-0.6423758[38;5;246m, [39m-0.6423758[38;5;246m, [39m-0.6423758[38;5;246m, [39m-0.6423758[38;5;246m, [39m-0.6423758[38;5;246m, [39m-0.6423758[38;5;246m, [39m-0.64237â€¦
$ inq_last_6mths                  [3m[38;5;246m<dbl>[39m[23m -0.8324634[38;5;246m, [39m1.5511111[38;5;246m, [39m-0.8324634[38;5;246m, [39m-0.8324634[38;5;246m, [39m-0.8324634[38;5;246m, [39m0.3593239[38;5;246m, [39m0.3593239[38;5;246m, [39m-0.8324634[38;5;246m,[39mâ€¦
$ open_acc                        [3m[38;5;246m<dbl>[39m[23m -0.516984456[38;5;246m, [39m-1.282635289[38;5;246m, [39m-1.282635289[38;5;246m, [39m1.524751096[38;5;246m, [39m0.759100264[38;5;246m, [39m1.014317208[38;5;246m, [39m-1.53785223â€¦
$ pub_rec                         [3m[38;5;246m<dbl>[39m[23m -0.3429372[38;5;246m, [39m-0.3429372[38;5;246m, [39m2.7652549[38;5;246m, [39m-0.3429372[38;5;246m, [39m-0.3429372[38;5;246m, [39m-0.3429372[38;5;246m, [39m-0.3429372[38;5;246m, [39m-0.342937â€¦
$ total_acc                       [3m[38;5;246m<dbl>[39m[23m 0.39969129[38;5;246m, [39m0.54625046[38;5;246m, [39m-0.47966374[38;5;246m, [39m0.83936881[38;5;246m, [39m0.54625046[38;5;246m, [39m0.10657294[38;5;246m, [39m-1.21245961[38;5;246m, [39m0.3996â€¦
$ interest_rate                   [3m[38;5;246m<dbl>[39m[23m 1.47394527[38;5;246m, [39m1.51546694[38;5;246m, [39m-0.11980960[38;5;246m, [39m0.63509631[38;5;246m, [39m-0.38788273[38;5;246m, [39m-0.92288823[38;5;246m, [39m0.03406610[38;5;246m, [39m-0.82â€¦
$ default                         [3m[38;5;246m<fct>[39m[23m no[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39myes[38;5;246m, [39mno[38;5;246m, [39myes[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mno[38;5;246m, [39mnoâ€¦
$ credit_utilization              [3m[38;5;246m<dbl>[39m[23m -1.841097091[38;5;246m, [39m2.786415973[38;5;246m, [39m-1.093786972[38;5;246m, [39m-1.730812803[38;5;246m, [39m0.771063625[38;5;246m, [39m0.659591315[38;5;246m, [39m-0.01674446â€¦
$ acc_to_age_ratio                [3m[38;5;246m<dbl>[39m[23m 0.50174733[38;5;246m, [39m-0.54849606[38;5;246m, [39m-0.52980631[38;5;246m, [39m0.22899756[38;5;246m, [39m-0.59303996[38;5;246m, [39m-0.36351000[38;5;246m, [39m-0.28344142[38;5;246m, [39m0.6â€¦
$ delinq_per_acc                  [3m[38;5;246m<dbl>[39m[23m -0.44991964[38;5;246m, [39m-0.44991964[38;5;246m, [39m-0.44991964[38;5;246m, [39m-0.44991964[38;5;246m, [39m-0.44991964[38;5;246m, [39m-0.44991964[38;5;246m, [39m-0.44991964[38;5;246m, [39m-â€¦
$ inq_rate                        [3m[38;5;246m<dbl>[39m[23m -0.520358012[38;5;246m, [39m1.759991048[38;5;246m, [39m-0.520358012[38;5;246m, [39m-0.520358012[38;5;246m, [39m-0.520358012[38;5;246m, [39m-0.107954458[38;5;246m, [39m0.8979078â€¦
$ term_factor                     [3m[38;5;246m<dbl>[39m[23m 0.3219163[38;5;246m, [39m-0.6274559[38;5;246m, [39m0.3219163[38;5;246m, [39m-0.6274559[38;5;246m, [39m-0.6274559[38;5;246m, [39m-0.6274559[38;5;246m, [39m0.3219163[38;5;246m, [39m-0.6274559[38;5;246m,[39mâ€¦
$ log_income                      [3m[38;5;246m<dbl>[39m[23m 2.44464243[38;5;246m, [39m0.95097048[38;5;246m, [39m-0.59583257[38;5;246m, [39m0.22483838[38;5;246m, [39m1.16307842[38;5;246m, [39m1.42016428[38;5;246m, [39m-0.24888072[38;5;246m, [39m-1.663â€¦
$ payment_ratio                   [3m[38;5;246m<dbl>[39m[23m -0.70055763[38;5;246m, [39m-0.66316187[38;5;246m, [39m-0.18762635[38;5;246m, [39m-0.40548621[38;5;246m, [39m-0.40388782[38;5;246m, [39m-0.50086538[38;5;246m, [39m-0.38905147[38;5;246m, [39m0â€¦
$ util_to_income                  [3m[38;5;246m<dbl>[39m[23m -1.42714472[38;5;246m, [39m1.75334314[38;5;246m, [39m-1.17179893[38;5;246m, [39m-1.24302250[38;5;246m, [39m2.18149734[38;5;246m, [39m0.22489237[38;5;246m, [39m-0.69513289[38;5;246m, [39m-1.4â€¦
$ home_ownership_OWN              [3m[38;5;246m<dbl>[39m[23m -0.4238857[38;5;246m, [39m-0.4238857[38;5;246m, [39m-0.4238857[38;5;246m, [39m-0.4238857[38;5;246m, [39m-0.4238857[38;5;246m, [39m-0.4238857[38;5;246m, [39m-0.4238857[38;5;246m, [39m-0.42388â€¦
$ home_ownership_RENT             [3m[38;5;246m<dbl>[39m[23m -0.8977787[38;5;246m, [39m-0.8977787[38;5;246m, [39m1.1136746[38;5;246m, [39m1.1136746[38;5;246m, [39m-0.8977787[38;5;246m, [39m1.1136746[38;5;246m, [39m1.1136746[38;5;246m, [39m-0.8977787[38;5;246m, [39mâ€¦
$ loan_purpose_debt_consolidation [3m[38;5;246m<dbl>[39m[23m 1.1204596[38;5;246m, [39m-0.8923421[38;5;246m, [39m-0.8923421[38;5;246m, [39m-0.8923421[38;5;246m, [39m1.1204596[38;5;246m, [39m-0.8923421[38;5;246m, [39m-0.8923421[38;5;246m, [39m1.1204596[38;5;246m,[39mâ€¦
$ loan_purpose_home_improvement   [3m[38;5;246m<dbl>[39m[23m -0.3277222[38;5;246m, [39m-0.3277222[38;5;246m, [39m3.0508567[38;5;246m, [39m-0.3277222[38;5;246m, [39m-0.3277222[38;5;246m, [39m-0.3277222[38;5;246m, [39m-0.3277222[38;5;246m, [39m-0.327722â€¦
$ loan_purpose_major_purchase     [3m[38;5;246m<dbl>[39m[23m -0.2968579[38;5;246m, [39m-0.2968579[38;5;246m, [39m-0.2968579[38;5;246m, [39m-0.2968579[38;5;246m, [39m-0.2968579[38;5;246m, [39m-0.2968579[38;5;246m, [39m-0.2968579[38;5;246m, [39m-0.29685â€¦
$ loan_purpose_medical            [3m[38;5;246m<dbl>[39m[23m -0.299178[38;5;246m, [39m-0.299178[38;5;246m, [39m-0.299178[38;5;246m, [39m-0.299178[38;5;246m, [39m-0.299178[38;5;246m, [39m3.341934[38;5;246m, [39m3.341934[38;5;246m, [39m-0.299178[38;5;246m, [39m3.3419â€¦
$ loan_purpose_other              [3m[38;5;246m<dbl>[39m[23m -0.2208157[38;5;246m, [39m-0.2208157[38;5;246m, [39m-0.2208157[38;5;246m, [39m-0.2208157[38;5;246m, [39m-0.2208157[38;5;246m, [39m-0.2208157[38;5;246m, [39m-0.2208157[38;5;246m, [39m-0.22081â€¦"
"1",""
"1","
"
"0","# Verify"
"0","table(recipe_data$default)"
"1","
"
"1","  no "
"1"," yes "
"1","
"
"1","5661 "
"1"," 339 "
"1","
"
